<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Canvas Animation</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="controlsModal" class="modal">
      <div class="modal-header">
        <span>Controls</span>
        <button class="minimize-btn" style="color: red">−</button>
      </div>
      <div class="modal-content">
        <div class="controls">
          <div class="slider-container">
            <label for="speedSlider">Animation Speed: </label>
            <input
              type="range"
              id="speedSlider"
              min="0.1"
              max="2"
              step="0.1"
              value="1"
            />
            <span id="speedValue">1x</span>
          </div>
          <!-- <div class="checkbox-container">
        <input type="checkbox" id="deterministicMode" />
        <label for="deterministicMode">Always Choose Most Likely Move</label>
      </div> -->
          <button id="pauseButton">Pause</button>
          <div class="waitStepContainer">
            <label for="carWaitStep">Wait Step: </label>
            <input type="number" id="carWaitStep" min="0" max="100" value="1" />
            <span>Seconds</span>
          </div>
          <div class="diagram-step">
            <label for="diagramStep">Diagram Step: </label>
            <input type="checkbox" id="diagramStep" checked />
            <span>Show Diagram</span>
          </div>
          <div class="query-container">
            <h3>Query Vehicle Movement Probabilities</h3>

            <div class="vehicle-position">
              <h4>Car Position:</h4>
              <label for="carRowInput">Row: </label>
              <input type="number" id="carRowInput" min="0" max="2" value="0" />
              <label for="carColInput">Column: </label>
              <input type="number" id="carColInput" min="0" max="2" value="0" />
            </div>

            <div class="vehicle-position">
              <h4>Bus Position:</h4>
              <label for="busRowInput">Row: </label>
              <input type="number" id="busRowInput" min="0" max="2" value="2" />
              <label for="busColInput">Column: </label>
              <input type="number" id="busColInput" min="0" max="2" value="2" />
            </div>

            <button id="queryButton">Query Probabilities</button>
            <div id="queryResult">Result will appear here</div>

            <div class="legend">
              <h4>Arrow Visualization Legend</h4>
              <p>
                Arrows show movement probabilities. Longer arrows = higher
                probability.
              </p>
              <div class="legend-item">
                <div class="legend-color car-color"></div>
                <span>Car Movement Arrows</span>
              </div>
              <div class="legend-item">
                <div class="legend-color bus-color"></div>
                <span>Bus Movement Arrows</span>
              </div>

              <h4 style="margin-top: 15px">Reward Legend</h4>
              <p>Tile colors show reward values.</p>
              <div style="display: flex; align-items: center; margin-top: 8px">
                <div
                  style="
                    width: 200px;
                    height: 20px;
                    background: linear-gradient(
                      to right,
                      rgb(255, 0, 0),
                      rgb(255, 255, 255),
                      rgb(0, 0, 255)
                    );
                  "
                ></div>
                <span style="margin-left: 10px; font-size: 12px"
                  >Negative ⟷ Zero ⟷ Positive</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settingsModal" class="modal">
      <div class="modal-header">
        <span>Settings</span>
        <button class="minimize-btn" style="color: red">−</button>
      </div>
      <div class="modal-content">
        <div class="settings">
          <div class="setting-item">
            <label for="darkModeToggle">Dark Mode:</label>
            <input type="checkbox" id="darkModeToggle" />
          </div>
        </div>
      </div>
    </div>

    <canvas id="myCanvas" width="800" height="600"></canvas>
    <script src="script.js"></script>
    <script src="environmentDiagramming.js"></script>
    <!-- <script src="environment.js"></script> -->
  </body>
</html>
